var Editable=React.createClass({displayName:"Editable",render:function(){return this.props.editMode?this.props.input:React.createElement("span",null,this.props.value)}}),SaveEditable=React.createClass({displayName:"SaveEditable",render:function(){return this.props.editMode?React.createElement("div",{className:"save-edit"},React.createElement("button",{onClick:this.props.submit,className:"btn btn-primary"},"Save"),React.createElement("button",{onClick:this.props.cancel,className:"btn btn-default"},"Cancel")):React.createElement("span",null)}}),EditSelection=React.createClass({displayName:"EditSelection",render:function(){return!this.props.canEdit||this.props.editMode?React.createElement("div",null):React.createElement("span",{className:"dropdown "+this.props.dropup},React.createElement("span",{className:"dropdown-toggle",type:"button",id:"dropdown","data-toggle":"dropdown","aria-expanded":"true"},React.createElement("span",{className:"edit-project caret"})),React.createElement("ul",{className:"dropdown-menu",role:"menu","aria-labelledby":"dropdown"},React.createElement("li",{onClick:this.props.edit,role:"presentation"},React.createElement("a",{role:"menuitem",tabIndex:"-1"},"Edit"))))}}),url="/api/project/"+$("#project-id").val(),updateProject=function(a){$.ajax({url:url,method:"PUT",data:JSON.stringify(a),contentType:"application/json"}).done(function(){this.setState({saved:a,edit:!1})}.bind(this)).fail(function(a){this.setState({edit:!1}),console.log(a)}.bind(this))};$.get(url,function(a){var b=a.user,c=a.project,d=b&&1==c.members.filter(function(b){return b.user._id==a.user._id}).length;React.render(React.createElement(Project,{url:url,project:c,user:b,canEdit:d}),document.getElementById("project-container")),React.render(React.createElement(StatusBar,{url:url,project:c,votes:a.votes,user:b,canEdit:d}),document.getElementById("status-bar"))},"json").fail(function(a,b,c){console.log(c),loadFacebook()});var Project=React.createClass({displayName:"Project",componentDidMount:function(){loadFacebook()},render:function(){var a=this.props.project;return a?React.createElement("div",{className:"row"},React.createElement(ProjectFeed,React.__spread({},this.props))):React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12"},React.createElement("h1",null,"Project Not Found")))}}),ProjectFeed=React.createClass({displayName:"ProjectFeed",mixins:[React.addons.LinkedStateMixin],getInitialState:function(){var a=this.props.project;return{edit:!1,saved:{name:a.name,tags:a.tags,description:a.description},inputName:a.name,inputTags:a.tags,inputDescription:a.description}},edit:function(){this.setState({edit:!0})},submit:function(){updateProject.bind(this,{name:this.state.inputName,description:this.state.inputDescription,tags:this.state.inputTags})()},cancel:function(){this.setState({edit:!1})},render:function(){var a=this.props.project,b=this.props.user,c=this.props.canEdit;return React.createElement("div",{id:"project-feed",className:"col-md-12"},React.createElement(ProjectBasicInfo,{user:b,project:a,canEdit:c}),React.createElement(ProjectDemo,{user:b,project:a,canEdit:c}),React.createElement(GoogleTimeline,{graphName:"timeline",timeline:a.timeline,canEdit:c}),React.createElement(ProjectMembers,{members:a.members,canEdit:c}))}}),ProjectBasicInfo=React.createClass({displayName:"ProjectBasicInfo",mixins:[React.addons.LinkedStateMixin],getInitialState:function(){var a=this.props.project;return{edit:!1,saved:{name:a.name,tags:a.tags,description:a.description},inputName:a.name,inputTags:a.tags,inputDescription:a.description}},edit:function(){this.setState({edit:!0})},submit:function(){updateProject.bind(this,{name:this.state.inputName,description:this.state.inputDescription,tags:this.state.inputTags})()},updateTags:function(a){console.log(a),this.setState({inputTags:a})},cancel:function(){this.setState({edit:!1})},render:function(){var a=this.props.project,b=this.props.canEdit,c=this.state.saved,d=this.state.edit,e=a.images[0]?"/uploads/"+a.images[0]:"/img/suw-logo.png",f=React.createElement("input",{type:"text",valueLink:this.linkState("inputName"),name:"name"}),g=React.createElement("textarea",{valueLink:this.linkState("inputDescription"),name:"description"}),h=c.description.split("\n").map(function(a,b){return 0==b?React.createElement("p",null,a):React.createElement("p",null,a,React.createElement("br",null))}),i=this.state.saved.tags.map(function(a){return React.createElement("span",{key:a,className:"label label-primary"},a)});return React.createElement("div",{className:"row basic-info"},React.createElement("div",{className:"title"},React.createElement("div",{className:"col-md-9"},React.createElement("h1",null,React.createElement(Editable,{editMode:d,value:c.name,input:f}),React.createElement(EditSelection,{canEdit:b,editMode:d,edit:this.edit})),React.createElement("div",{className:"tags"},React.createElement(Editable,{editMode:d,value:i,input:React.createElement(TagInput,{tags:this.state.inputTags,update:this.updateTags})})),React.createElement(Editable,{editMode:d,value:h,input:g}),React.createElement(SaveEditable,{editMode:d,submit:this.submit,cancel:this.cancel})),React.createElement("div",{className:"hidden-xs hidden-sm col-md-3"},React.createElement("div",{className:"img-responsive"},React.createElement("img",{className:"logo",src:e})))))}}),TagInput=React.createClass({displayName:"TagInput",addTag:function(a){var b=(a.keyCode,a.target.value),c=this.props.tags;if(b.match(/^\s*\w+ $/)){b=b.trim();var d=React.addons.update(c,{$push:[b.substr(0,b.length)]});this.props.update(d),$("#inputTags").val("")}},tagAction:function(){var a=event.keyCode,b=event.target.value,c=this.props.tags;if(8!=a&&46!=a||""!==event.target.value){if(13==a&&(event.preventDefault(),!b.match(/^\s*$/))){b=b.trim();var d=React.addons.update(c,{$push:[b.substr(0,b.length)]});this.props.update(d),$("#inputTags").val("")}}else{var d=c.filter(function(a,b){return b!==c.length-1});this.props.update(d),$("#inputTags").val("")}},focus:function(){$("#inputTags").focus()},render:function(){var a=this.props.tags.map(function(a){return React.createElement("span",{className:"label label-primary"},a)});return React.createElement("div",{id:"tagEditor",onClick:this.focus},React.createElement("span",null,a),React.createElement("input",{id:"inputTags",onKeyUp:this.addTag,onKeyDown:this.tagAction,type:"text"}))}}),ProjectDemo=React.createClass({displayName:"ProjectDemo",mixins:[React.addons.LinkedStateMixin],getInitialState:function(){var a=this.props.project.demo;return{edit:!1,saved:{demo:a},demoInput:a}},edit:function(){this.setState({edit:!0})},submit:function(){updateProject.bind(this,{demo:this.state.demoInput})()},cancel:function(){this.setState({edit:!1})},render:function(){var a=(this.props.user,this.state.saved.demo),b=React.createElement("p",null,"No demo added yet!");if(!a&&!this.props.canEdit)return React.createElement("div",null);a&&(b=React.createElement("div",{className:"video-container"},React.createElement("iframe",{src:a})));var c=this.state.edit,d=React.createElement("input",{type:"text",name:"demo",valueLink:this.linkState("demoInput")});return React.createElement("div",{className:"project-demo"},React.createElement("h2",null,"Project Demo",React.createElement(EditSelection,{canEdit:this.props.canEdit,editMode:c,edit:this.edit})),React.createElement(Editable,{value:b,editMode:c,input:d}),React.createElement(SaveEditable,{editMode:c,submit:this.submit,cancel:this.cancel}))}}),GoogleTimeline=React.createClass({displayName:"GoogleTimeline",getInitialState:function(){return{loaded:!1}},componentDidMount:function(){google.load("visualization","1.1",{packages:["timeline"],callback:function(){this.setState({loaded:!0}),this.drawCharts()}.bind(this)})},componentDidUpdate:function(){this.drawCharts()},getTooltip:function(a,b){return React.renderToString(React.createElement("div",{className:"timeline-tooltip"},React.createElement("h1",null,a.title),React.createElement("p",null,a.description),React.createElement("p",null,a.date.toDateString())))},drawCharts:function(){if(this.state.loaded&&this.props.timeline.length){var a=new google.visualization.DataTable;a.addColumn({type:"string",id:"Type"}),a.addColumn({type:"string",id:"Title"}),a.addColumn({type:"string",role:"tooltip",p:{html:!0}}),a.addColumn({type:"date",id:"Start"}),a.addColumn({type:"date",id:"End"});var b=this.props.timeline.map(function(a){return a.date=new Date(a.date),["Event",a.title,this.getTooltip(a),a.date,a.date]}.bind(this)),c=new Date;b.push(["Event","Today",this.getTooltip({title:"Today",description:"What an awesome day!",date:c}),c,c]),a.addRows(b);var d={timeline:{groupByRowLabel:!0},tooltip:{isHtml:!0}},e=new google.visualization.Timeline(document.getElementById(this.props.graphName));e.draw(a,d)}},render:function(){var a=React.createElement("p",null,"No timeline events added yet!");return this.props.timeline.length||this.props.canEdit?(this.props.timeline.length&&(a=React.createElement("div",{id:this.props.graphName,style:{height:100,width:"100%"}})),React.createElement("div",null,React.createElement("h2",null,"Milestones"),a)):React.createElement("div",null)}}),ProjectMembers=React.createClass({displayName:"ProjectMembers",render:function(){var a=this.props.members.map(function(a){return React.createElement(ProjectMember,{key:a._id,member:a.user})});return React.createElement("div",null,React.createElement("h2",null,"Founders"),React.createElement("div",{className:"members row"},a))}}),ProjectMember=React.createClass({displayName:"ProjectMember",render:function(){var a=this.props.member;return React.createElement("div",{className:"member col-xs-12 media"},React.createElement("div",{className:"media-left"},React.createElement("img",{className:"img-circle media-object",src:a.picture,height:"60px",width:"60px"})),React.createElement("div",{className:"media-body"},React.createElement("a",{href:"/profile/"+a._id},React.createElement("h4",{className:"media-heading"},a.fname+" "+a.lname)),React.createElement("p",{className:"bio"},a.bio)))}}),StatusBar=React.createClass({displayName:"StatusBar",render:function(){var a=this.props.project;this.props.canEdit;return React.createElement("div",{className:"row"},React.createElement(ProjectOverview,React.__spread({project:a},this.props)),React.createElement(ProjectVotes,React.__spread({},this.props)))}}),ProjectOverview=React.createClass({displayName:"ProjectOverview",mixins:[React.addons.LinkedStateMixin],getInitialState:function(){var a=this.props.project;return{edit:!1,saved:{website:a.website,hiring:a.hiring},inputWebsite:a.website,inputHiring:a.hiring}},edit:function(){this.setState({edit:!0})},submit:function(){updateProject.bind(this,{website:this.state.inputWebsite,hiring:this.state.inputHiring})()},cancel:function(){this.setState({edit:!1})},render:function(){var a=this.props.project,b=this.state.saved,c=this.state.edit,d=React.createElement("input",{type:"text",name:"website",valueLink:this.linkState("inputWebsite")}),e=React.createElement("a",{target:"_blank",href:b.website},React.createElement("span",{className:"status-item"},React.createElement("span",{className:"text hidden-xs"},"Website"),React.createElement("i",{className:"fa fa-external-link"}))),f=React.createElement(Editable,{editMode:c,value:e,input:d}),g=React.createElement("input",{type:"checkbox",name:"hiring",checkedLink:this.linkState("inputHiring")}),h=React.createElement("i",{className:"fa "+(b.hiring?"fa-check-circle-o":"fa-circle-o")}),i=React.createElement(Editable,{editMode:c,value:h,input:g});return React.createElement("div",{className:"col-xs-8"},React.createElement(SaveEditable,{editMode:c,submit:this.submit,cancel:this.cancel}),f,React.createElement("span",{className:"status-item"},React.createElement("span",{className:"text"},"Hiring"),i),React.createElement("span",{className:"status-item hidden-xs post-date"},"Posted on ",new Date(a.date).toLocaleDateString()),React.createElement(EditSelection,{canEdit:this.props.canEdit,editMode:this.state.edit,edit:this.edit,dropup:"dropup"}))}}),ProjectVotes=React.createClass({displayName:"ProjectVotes",getInitialState:function(){var a=this.props.votes,b=this.props.user,c=b&&1===a.filter(function(a){return a.user._id===b._id}).length;return{votes:a,myVote:c}},updateVotes:function(a,b){this.setState({votes:a,myVote:b})},componentDidMount:function(){this.updateModal()},componentDidUpdate:function(){this.updateModal()},showModal:function(){$("#user-votes").modal("show")},updateModal:function(){var a=this.state.votes.map(function(a){var b=this.props.user;return b&&a.user._id==b._id?void 0:React.createElement("li",{className:"list-group-item"},React.createElement("a",{href:"/profile/"+a.user._id},React.createElement("img",{className:"img-circle",width:"30px",src:a.user.picture}),a.user.fname+" "+a.user.lname))}.bind(this));React.render(React.createElement("ul",{className:"list-group"},a),document.getElementById("user-votes-content"))},render:function(){var a=this.state.votes,b=this.state.myVote,c=React.createElement("span",null,"Be the first to upvote this!");if(a.length){var d=a.length-(b?1:0);c=React.createElement("span",null,b?React.createElement("span",null,React.createElement("a",{href:"/profile"},"You"),d>0?" and ":""):"",d>0?React.createElement("a",{onClick:this.showModal},d," other",1!=d?"s":""):"",React.createElement("span",null," upvoted this project"))}return React.createElement("div",{className:"col-xs-4"},React.createElement(VoteButton,React.__spread({update:this.updateVotes,myVote:b},this.props)),React.createElement("span",{className:"status-item",id:"votes-container"},c))}}),VoteButton=React.createClass({displayName:"VoteButton",handleClick:function(){this.props.user&&$.get(url+"/vote",function(a){this.props.update(a.votes,a.voteStatus)}.bind(this),"json")},componentDidMount:function(){this.props.user||$(".vote-large").tooltip({title:"You must sign in to vote on projects!",placement:"top"})},render:function(){var a=this.props.myVote,b="vote-large"+(a?" user-voted":" user-not-voted");return React.createElement("div",{onClick:this.handleClick,className:b},React.createElement("span",{className:"glyphicon glyphicon-heart"}),React.createElement("span",{className:"vote-count hidden-xs"},"Upvote"))}});